
{
    "displayName": "nemo_llama2_7b",
    "jobSpec": {
      "workerPoolSpecs": [
        {   
          "machineSpec": {
            "machineType": "a3-megagpu-8g",
            "acceleratorType": "NVIDIA_H100_MEGA_80GB",
            "acceleratorCount": 8
          },  
          "replicaCount": "1",
          "diskSpec": {
            "bootDiskType": "pd-ssd",
            "bootDiskSizeGb": 100
          },    
          "containerSpec": {
            "imageUri": "classicboyir/nemo:02",
            "command": [
                "sh", "-c"
            ],
            "args": [
              "git clone https://github.com/hosseinsarshar/dist-training-vertex.git && chmod +x ./dist-training-vertex/nemo/job.sh && ./dist-training-vertex/nemo/job.sh"
            ],
            "env": [
              {
                "name": "LD_LIBRARY_PATH",
                "value": "/usr/local/nvidia/lib64"
              },
              {
                "name": "NNODES",
                "value": "4"
              },
              {
                "name": "CONFIG_PATH",
                "value": "/workspace/dist-training-vertex/nemo/llama2-7b/"
              },
              {
                "name": "CONFIG_NAME",
                "value": "llama2-7b.yaml"
              },
              {
                "name": "ADDITIONAL_ARGS",
                "value": "+exp_manager.explicit_log_dir=\"/tmp/nemo-experiments/results\" +exp_manager.exp_dir=\"/tmp/exp\" ++model.micro_batch_size=1 ++trainer.max_steps=100 +model.data.data_prefix=\"[]\" ++trainer.limit_val_batches=0.0 ++trainer.val_check_interval=1"
              }
            ]
          }
        },
        {
          "machineSpec": {
            "machineType": "a3-megagpu-8g",
            "acceleratorType": "NVIDIA_H100_MEGA_80GB",
            "acceleratorCount": 8
          },
          "replicaCount": "3",
          "diskSpec": {
            "bootDiskType": "pd-ssd",
            "bootDiskSizeGb": 100
          },    
          "containerSpec": {
            "imageUri": "classicboyir/nemo:02",
            "command": [
                "sh", "-c"
            ],
            "args": [
              "git clone https://github.com/hosseinsarshar/dist-training-vertex.git && chmod +x ./dist-training-vertex/nemo/job.sh && ./dist-training-vertex/nemo/job.sh"
            ],
            "env": [
              {
                "name": "LD_LIBRARY_PATH",
                "value": "/usr/local/nvidia/lib64"
              },
              {
                "name": "NNODES",
                "value": "4"
              },
              {
                "name": "CONFIG_PATH",
                "value": "/workspace/dist-training-vertex/nemo/llama2-7b/"
              },
              {
                "name": "CONFIG_NAME",
                "value": "llama2-7b.yaml"
              },
              {
                "name": "ADDITIONAL_ARGS",
                "value": "+exp_manager.explicit_log_dir=\"/tmp/nemo-experiments/results\" +exp_manager.exp_dir=\"/tmp/exp\" ++model.micro_batch_size=1 ++trainer.max_steps=100 +model.data.data_prefix=\"[]\" ++trainer.limit_val_batches=0.0 ++trainer.val_check_interval=1"
              }
            ]
          }
        }
      ],
      "enableWebAccess": true
    }
  }
  